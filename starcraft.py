import random
import time
from collections import Counter, defaultdict
import ollama

players = [
    "ì§ ë ˆì´ë„ˆ", "ì‚¬ë¼ ì¼€ë¦¬ê±´", "ì‚¬ë¯¸ë¥´ ë“€ë€", "ì—ë“œë¨¼ë“œ ë“€í¬",
    "ì•„í¬íŠœëŸ¬ìŠ¤ ë©©ìŠ¤í¬", "í†° ì¹´ì”ìŠ¤í‚¤", "ë…¸ë°” í…Œë¼", "ì•Œë ‰ì„¸ì´ ìŠ¤íˆ¬ì½”í”„"
]

rooms = [
    'ì•¼ë§ˆí†  í¬ (Yamato Cannon)', 'ì„ ì› í¸ì˜ ì‹œì„¤ (Crew Facilities)', 'ë ˆì´ì € í¬ (Gun Batteries)',
    'ì°¨ì› ì¶”ì§„ê¸° (Wrap Drive)', 'í•µìœµí•© ë°˜ì‘ë¡œ (Fusion Reactor)', 'ì˜ë¬´ì‹¤ (Medical Room)',
    "ìº¡í‹´ë£¸ (Captain's Room)"
]

story_prompts = [
    "ë…¸ë°” í…Œë¼ê°€ ì¡°ì¢…ë‹¹í•˜ê³  ìˆë‹¤ëŠ” ë³´ê³ ê°€ ìˆë‹¤. ê°ì • ì—†ì´ ì›€ì§ì´ëŠ” ê·¸ë…€ì˜ íƒœë„ëŠ” ê·¸ ìì²´ë¡œ ìœ„í˜‘ì´ë‹¤.",
    "ì§ ë ˆì´ë„ˆëŠ” ëª¨ë‘ê°€ ë¯¿ëŠ” ì˜ì›…ì´ë‹¤. í•˜ì§€ë§Œ ê·¸ê°€ ê°ì—¼ë˜ì—ˆë‹¤ë©´ ì•„ë¬´ë„ ì˜ì‹¬í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ê³¼ê±°ì— ì €ê·¸ì˜ ì†ì— ë„˜ì–´ê°„ ì ì´ ìˆë‹¤. ê·¸ ê¸°ì–µì´ ë˜ì‚´ì•„ë‚œë‹¤ë©´...",
    "ì•„í¬íŠœëŸ¬ìŠ¤ ë©©ìŠ¤í¬ì˜ ì •ì¹˜ì  ìˆ˜ì™„ì´ë¼ë©´, ê°ì—¼ì¡°ì°¨ë„ í†µì¹˜ ë„êµ¬ë¡œ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.",
    "ë“€ë€ì€ ì´ì¤‘ì²©ìì¼ ê°€ëŠ¥ì„±ì´ í¬ë‹¤. ê°ì—¼ìë¼ë©´ ê·¸ê°€ ì•„ë‹ ë¦¬ ì—†ë‹¤.",
    "ë“€í¬ëŠ” ì¶©ì„±ì‹¬ ê°•í•œ ì¥êµ°ì´ë‹¤. ê·¸ëŸ¬ë‚˜ ê°ì—¼ëœ ì¶©ì„±ì€ ê°€ì¥ ë¬´ì„­ë‹¤.",
    "í†° ì¹´ì”ìŠ¤í‚¤ëŠ” ë‹¨ìˆœí•˜ê³  ì§ì„¤ì ì¸ ì¸ë¬¼ì´ë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” ê·¸ ë‹¨ìˆœí•¨ì´ ìœ„ì¥ì¼ ìˆ˜ë„ ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ê·œìœ¨ì˜ í™”ì‹ ì´ë‹¤. í•˜ì§€ë§Œ ê·¸ ì§ˆì„œ ì†ì— ì¹¨íˆ¬í•œ ê°ì—¼ì´ë¼ë©´ ì•„ë¬´ë„ ëª¨ë¥¼ ê²ƒì´ë‹¤.",
    "ë…¸ë°”ì˜ ì‚¬ì´ì˜¤ë‹‰ í†µì œê°€ ì•½í•´ì§€ê³  ìˆë‹¤. ì´ìƒí•œ ê¿ˆì„ ê¿¨ë‹¤ëŠ” ë³´ê³ ê°€ ë“¤ì–´ì™”ë‹¤.",
    "ë“€ë€ì€ ì¸ê°„ì´ ì•„ë‹ì§€ë„ ëª¨ë¥¸ë‹¤. ê·¸ì˜ í–‰ë™ì€ ê³„ì‚°ëœ ë“¯ì´ ì •ë°€í•˜ë‹¤.",
     "ì§ ë ˆì´ë„ˆê°€ ëˆ„êµ°ê°€ì™€ ì†ë‹¥ì´ë©° ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¬´ì „ì„ ë‚˜ëˆ„ëŠ” ê²ƒì´ ëª©ê²©ë˜ì—ˆë‹¤.",
    "ë…¸ë°” í…Œë¼ì˜ ì‚¬ì´ì˜¤ë‹‰ ì‹ í˜¸ê°€ ì¼ì •í•˜ì§€ ì•Šë‹¤. ì •ì‹ ì  ì¹¨íˆ¬ì˜ ì§•í›„ì¼ ìˆ˜ë„ ìˆë‹¤.",
    "ë“€ë€ì€ ë§¤ì¼ ê¸°ë¡ì„ ë‚¨ê¸°ê³  ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì•„ë¬´ë„ ê·¸ ê¸°ë¡ì„ ë³¸ ì ì´ ì—†ë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ì˜ ëª…ë ¹ ì²´ê³„ëŠ” ë³€í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ê°ì •ì´ ë°°ì œëœ ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤.",
    "ë“€í¬ ì¥êµ°ì€ ì´ìƒí•˜ë¦¬ë§Œì¹˜ ì¡°ìš©í•˜ë‹¤. ì „ë¡€ ì—†ëŠ” íƒœë„ ë³€í™”ë‹¤.",
    "í†° ì¹´ì”ìŠ¤í‚¤ëŠ” ë°©ì–´ ì‹œìŠ¤í…œì„ ìš°ì—°íˆ êº¼íŠ¸ë¦° í›„ ê¸°ì–µì´ ì—†ë‹¤ê³  ì£¼ì¥í–ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì˜ ì†ëª© ì¥ì¹˜ì—ì„œ ì €ê·¸ ì‹ í˜¸ì™€ ìœ ì‚¬í•œ ì£¼íŒŒìˆ˜ê°€ ê°ì§€ë˜ì—ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” íˆ¬í‘œ ì‹œìŠ¤í…œì„ ìì‹ ì´ ì œì–´í•˜ê³  ìˆë‹¤ê³  ì€ê·¼íˆ ì•”ì‹œí–ˆë‹¤.",
    "ì‚¬ë ¹ë¶€ í†µì‹  ë¡œê·¸ì—ì„œ ë ˆì´ë„ˆì˜ ìŒì„±ì´ ê¸°ì´í•˜ê²Œ ë³€ì¡°ëœ ì±„ ë°˜ë³µë˜ì—ˆë‹¤.",
    "ë“€ë€ì˜ ê³µê°„ ì´ë™ ë¡œê·¸ê°€ ì‹¤ì œ ìœ„ì¹˜ ê¸°ë¡ê³¼ ë¶ˆì¼ì¹˜í•œë‹¤.",
    "ë…¸ë°”ê°€ ê°ì‹œ ì¹´ë©”ë¼ë¥¼ ëª¨ë‘ ë¹„í™œì„±í™”í•œ ì§í›„ í•œ ëª…ì´ ì‹¤ì¢…ë˜ì—ˆë‹¤.",
    "ë“€í¬ëŠ” ë™ë£Œì˜ ì£½ìŒì„ 'êµ°ì‚¬ì  ë¶ˆê°€í”¼í•¨'ì´ë¼ë©° ì •ë‹¹í™”í–ˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ìê¾¸ ê³¼ê±° ì „ìŸ ì´ì•¼ê¸°ë¥¼ ë°˜ë³µí•˜ë©° í˜„ì¬ë¥¼ ë¶€ì •í•˜ê³  ìˆë‹¤.",
    "í†°ì€ ì§€ë‚˜ì¹˜ê²Œ ì¹¨ì°©í•˜ë‹¤. ê·¸ë‹¤ìš´ ê³¼ë¯¼ë°˜ì‘ì´ ì „í˜€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ìì‹ ë§Œ ë©´ì—­ì´ë¼ë©° ì˜ë£Œê²€ì‚¬ë¥¼ ê±°ë¶€í–ˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” ì¼€ë¦¬ê±´ì„ ë‘ë‘”í•˜ëŠ” ë°œì–¸ì„ ë°˜ë³µí•˜ê³  ìˆë‹¤. ê°ì •ì¸ê°€, ê³µëª¨ì¸ê°€?",
    "ë“€ë€ì€ ëŠ˜ ì¤‘ë¦½ì ì´ë‹¤. ë„ˆë¬´ ì™„ë²½í•œ ì¤‘ë¦½ì€ ì˜ì‹¬ìŠ¤ëŸ½ë‹¤.",
    "ë…¸ë°”ëŠ” ë™ì¼ ë°œì–¸ì„ 2ì¼ ì—°ì† ë°˜ë³µí–ˆë‹¤. ê¸°ì–µ ì¡°ì‘ ê°€ëŠ¥ì„±ì´ ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ì°¨íŠ¸ì— ì—†ëŠ” ì¥ì†Œì—ì„œ ì‘ì „ì„ í¼ì³¤ë‹¤ê³  ì£¼ì¥í–ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ì €ê·¸ì™€ ê´€ë ¨ëœ ê¿ˆì„ ê¾¸ì—ˆë‹¤ê³  í„¸ì–´ë†“ì•˜ë‹¤.",
    "ë“€í¬ëŠ” ì ˆì°¨ë¥¼ ë”°ë¥´ì§€ ì•Šê³  ë¬´ë‹¨ íˆ¬í‘œë¥¼ ì§€ì‹œí–ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ìì‹ ì„ ê°ì—¼ìë¡œ ì§€ëª©í•œ ìë¥¼ ì „ë¶€ 'ë°˜ì—­ì'ë¡œ ì„ ì–¸í–ˆë‹¤.",
    "í†°ì€ ëˆ„êµ°ê°€ë¥¼ ëª°ë˜ ê°ì‹œí•œ ì‚¬ì‹¤ì„ ì¸ì •í–ˆë‹¤. ì´ìœ ëŠ” ë§í•˜ì§€ ì•Šì•˜ë‹¤.",
    "ë“€ë€ì€ ê°ì—¼ ìƒíƒœì—ì„œë„ ì •ìƒì´ì—ˆì„ ìˆ˜ ìˆë‹¤ëŠ” ê°€ì„¤ì„ ì£¼ì¥í–ˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” 'ì´ì œ ë¯¿ì„ ì‚¬ëŒì€ ì—†ë‹¤'ê³  ë§í•˜ë©° ë…ë¦½ í–‰ë™ì„ ì‹œì‘í–ˆë‹¤.",
    "ë…¸ë°”ëŠ” ì§„ë‹¨ì„œ ìœ„ì¡° ê°€ëŠ¥ì„±ì´ ìˆë‹¤ëŠ” ìµëª… ì œë³´ê°€ ë“¤ì–´ì™”ë‹¤.",
    "ë“€í¬ëŠ” ì¶”ë°©ëœ ê°ì—¼ìê°€ 'ìœ„ëŒ€í•œ ë³‘ê¸°'ì˜€ë‹¤ê³  ì¹­í–ˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ê³ ë¦½ëœ ë°©ì—ì„œ 3ì‹œê°„ ë™ì•ˆ í™€ë¡œ ìˆì—ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ê²©ë‚©ê³ ë¥¼ ë´‰ì‡„í–ˆë‹¤. ì´ìœ ëŠ” 'ì˜ˆì§€ëª½ ë•Œë¬¸'ì´ë¼ê³  í–ˆë‹¤.",
    "ë“€ë€ì€ 'í˜¼ë€ì´ ê³§ ì§ˆì„œ'ë¼ëŠ” ë§ì„ ìì£¼ ë°˜ë³µí•˜ê³  ìˆë‹¤.",
    "í†°ì€ 'ì§ê°'ì´ë¼ëŠ” ë§ì„ ê·¼ê±° ì—†ì´ ë°˜ë³µí•˜ë©° íŠ¹ì • ì¸ë¬¼ì„ ëª°ì•„ê°„ë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ì •ê¸° ë¸Œë¦¬í•‘ì„ ëª¨ë‘ ìƒëµí•˜ê³  ê°œì¸ ì¡°ì‚¬ì— ì§‘ì¤‘í•˜ê³  ìˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” ì ë“  ì‚¬ì´ ê¿ˆì—ì„œ ê°ì—¼ìì™€ ëŒ€í™”ë¥¼ ë‚˜ëˆ´ë‹¤ê³  ë§í–ˆë‹¤.",
    "ë…¸ë°”ëŠ” í†µì‹  ì¥ë¹„ë¥¼ ìì‹ ì˜ ê²ƒìœ¼ë¡œë§Œ ì•”í˜¸í™”í•´ ì‚¬ìš©í•˜ê³  ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ì–´ëŠ ìˆœê°„ë¶€í„° ì£¼ë³€ì˜ ì§ˆë¬¸ì— ëŒ€ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤.",
    "ë“€í¬ëŠ” 'í•œ ëª…ì¯¤ í¬ìƒë˜ì–´ì•¼ ì§„ì‹¤ì´ ë“œëŸ¬ë‚œë‹¤'ê³  ë§í–ˆë‹¤.",
    "ë“€ë€ì€ íˆ¬í‘œ ë•Œë§ˆë‹¤ í•­ìƒ íŠ¹ì • ì¸ë¬¼ì—ê²Œ í‘œë¥¼ ë˜ì§„ë‹¤. ì´ìœ ëŠ” ëª¨ë¥¸ë‹¤.",
    "ì¼€ë¦¬ê±´ì€ íŠ¹ì • êµ¬ì—­ì˜ ì ‘ê·¼ì„ ê°•í•˜ê²Œ ë§‰ê³  ìˆë‹¤. ì´ìœ ë¥¼ ë¬»ì ì¹¨ë¬µí–ˆë‹¤.",
    "í†°ì€ ê°‘ìê¸° ë‹¤ë¥¸ ì‚¬ëŒì„ ì˜ì‹¬í•˜ì§€ ì•Šê³  ìì±…í•˜ëŠ” íƒœë„ë¡œ ë³€í–ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” 'ì´ ëª¨ë“  í˜¼ë€ì€ ì˜¤íˆë ¤ ê¸°íšŒë‹¤'ë¼ê³  ë§í•˜ë©° ì›ƒì—ˆë‹¤."    "ë…¸ë°” í…Œë¼ê°€ ì¡°ì¢…ë‹¹í•˜ê³  ìˆë‹¤ëŠ” ë³´ê³ ê°€ ìˆë‹¤. ê°ì • ì—†ì´ ì›€ì§ì´ëŠ” ê·¸ë…€ì˜ íƒœë„ëŠ” ê·¸ ìì²´ë¡œ ìœ„í˜‘ì´ë‹¤.",
    "ì§ ë ˆì´ë„ˆëŠ” ëª¨ë‘ê°€ ë¯¿ëŠ” ì˜ì›…ì´ë‹¤. í•˜ì§€ë§Œ ê·¸ê°€ ê°ì—¼ë˜ì—ˆë‹¤ë©´ ì•„ë¬´ë„ ì˜ì‹¬í•˜ì§€ ì•Šì„ ê²ƒì´ë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ê³¼ê±°ì— ì €ê·¸ì˜ ì†ì— ë„˜ì–´ê°„ ì ì´ ìˆë‹¤. ê·¸ ê¸°ì–µì´ ë˜ì‚´ì•„ë‚œë‹¤ë©´...",
    "ì•„í¬íŠœëŸ¬ìŠ¤ ë©©ìŠ¤í¬ì˜ ì •ì¹˜ì  ìˆ˜ì™„ì´ë¼ë©´, ê°ì—¼ì¡°ì°¨ë„ í†µì¹˜ ë„êµ¬ë¡œ í™œìš©í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.",
    "ë“€ë€ì€ ì´ì¤‘ì²©ìì¼ ê°€ëŠ¥ì„±ì´ í¬ë‹¤. ê°ì—¼ìë¼ë©´ ê·¸ê°€ ì•„ë‹ ë¦¬ ì—†ë‹¤.",
    "ë“€í¬ëŠ” ì¶©ì„±ì‹¬ ê°•í•œ ì¥êµ°ì´ë‹¤. ê·¸ëŸ¬ë‚˜ ê°ì—¼ëœ ì¶©ì„±ì€ ê°€ì¥ ë¬´ì„­ë‹¤.",
    "í†° ì¹´ì”ìŠ¤í‚¤ëŠ” ë‹¨ìˆœí•˜ê³  ì§ì„¤ì ì¸ ì¸ë¬¼ì´ë‹¤. í•˜ì§€ë§Œ ë•Œë¡œëŠ” ê·¸ ë‹¨ìˆœí•¨ì´ ìœ„ì¥ì¼ ìˆ˜ë„ ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ê·œìœ¨ì˜ í™”ì‹ ì´ë‹¤. í•˜ì§€ë§Œ ê·¸ ì§ˆì„œ ì†ì— ì¹¨íˆ¬í•œ ê°ì—¼ì´ë¼ë©´ ì•„ë¬´ë„ ëª¨ë¥¼ ê²ƒì´ë‹¤.",
    "ë…¸ë°”ì˜ ì‚¬ì´ì˜¤ë‹‰ í†µì œê°€ ì•½í•´ì§€ê³  ìˆë‹¤. ì´ìƒí•œ ê¿ˆì„ ê¿¨ë‹¤ëŠ” ë³´ê³ ê°€ ë“¤ì–´ì™”ë‹¤.",
    "ë“€ë€ì€ ì¸ê°„ì´ ì•„ë‹ì§€ë„ ëª¨ë¥¸ë‹¤. ê·¸ì˜ í–‰ë™ì€ ê³„ì‚°ëœ ë“¯ì´ ì •ë°€í•˜ë‹¤.",
     "ì§ ë ˆì´ë„ˆê°€ ëˆ„êµ°ê°€ì™€ ì†ë‹¥ì´ë©° ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ë¬´ì „ì„ ë‚˜ëˆ„ëŠ” ê²ƒì´ ëª©ê²©ë˜ì—ˆë‹¤.",
    "ë…¸ë°” í…Œë¼ì˜ ì‚¬ì´ì˜¤ë‹‰ ì‹ í˜¸ê°€ ì¼ì •í•˜ì§€ ì•Šë‹¤. ì •ì‹ ì  ì¹¨íˆ¬ì˜ ì§•í›„ì¼ ìˆ˜ë„ ìˆë‹¤.",
    "ë“€ë€ì€ ë§¤ì¼ ê¸°ë¡ì„ ë‚¨ê¸°ê³  ìˆë‹¤. ê·¸ëŸ¬ë‚˜ ì•„ë¬´ë„ ê·¸ ê¸°ë¡ì„ ë³¸ ì ì´ ì—†ë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ì˜ ëª…ë ¹ ì²´ê³„ëŠ” ë³€í•˜ì§€ ì•Šì•˜ì§€ë§Œ, ê°ì •ì´ ë°°ì œëœ ê²ƒì²˜ëŸ¼ ë³´ì¸ë‹¤.",
    "ë“€í¬ ì¥êµ°ì€ ì´ìƒí•˜ë¦¬ë§Œì¹˜ ì¡°ìš©í•˜ë‹¤. ì „ë¡€ ì—†ëŠ” íƒœë„ ë³€í™”ë‹¤.",
    "í†° ì¹´ì”ìŠ¤í‚¤ëŠ” ë°©ì–´ ì‹œìŠ¤í…œì„ ìš°ì—°íˆ êº¼íŠ¸ë¦° í›„ ê¸°ì–µì´ ì—†ë‹¤ê³  ì£¼ì¥í–ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì˜ ì†ëª© ì¥ì¹˜ì—ì„œ ì €ê·¸ ì‹ í˜¸ì™€ ìœ ì‚¬í•œ ì£¼íŒŒìˆ˜ê°€ ê°ì§€ë˜ì—ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” íˆ¬í‘œ ì‹œìŠ¤í…œì„ ìì‹ ì´ ì œì–´í•˜ê³  ìˆë‹¤ê³  ì€ê·¼íˆ ì•”ì‹œí–ˆë‹¤.",
    "ì‚¬ë ¹ë¶€ í†µì‹  ë¡œê·¸ì—ì„œ ë ˆì´ë„ˆì˜ ìŒì„±ì´ ê¸°ì´í•˜ê²Œ ë³€ì¡°ëœ ì±„ ë°˜ë³µë˜ì—ˆë‹¤.",
    "ë“€ë€ì˜ ê³µê°„ ì´ë™ ë¡œê·¸ê°€ ì‹¤ì œ ìœ„ì¹˜ ê¸°ë¡ê³¼ ë¶ˆì¼ì¹˜í•œë‹¤.",
    "ë…¸ë°”ê°€ ê°ì‹œ ì¹´ë©”ë¼ë¥¼ ëª¨ë‘ ë¹„í™œì„±í™”í•œ ì§í›„ í•œ ëª…ì´ ì‹¤ì¢…ë˜ì—ˆë‹¤.",
    "ë“€í¬ëŠ” ë™ë£Œì˜ ì£½ìŒì„ 'êµ°ì‚¬ì  ë¶ˆê°€í”¼í•¨'ì´ë¼ë©° ì •ë‹¹í™”í–ˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ìê¾¸ ê³¼ê±° ì „ìŸ ì´ì•¼ê¸°ë¥¼ ë°˜ë³µí•˜ë©° í˜„ì¬ë¥¼ ë¶€ì •í•˜ê³  ìˆë‹¤.",
    "í†°ì€ ì§€ë‚˜ì¹˜ê²Œ ì¹¨ì°©í•˜ë‹¤. ê·¸ë‹¤ìš´ ê³¼ë¯¼ë°˜ì‘ì´ ì „í˜€ ë³´ì´ì§€ ì•ŠëŠ”ë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ìì‹ ë§Œ ë©´ì—­ì´ë¼ë©° ì˜ë£Œê²€ì‚¬ë¥¼ ê±°ë¶€í–ˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” ì¼€ë¦¬ê±´ì„ ë‘ë‘”í•˜ëŠ” ë°œì–¸ì„ ë°˜ë³µí•˜ê³  ìˆë‹¤. ê°ì •ì¸ê°€, ê³µëª¨ì¸ê°€?",
    "ë“€ë€ì€ ëŠ˜ ì¤‘ë¦½ì ì´ë‹¤. ë„ˆë¬´ ì™„ë²½í•œ ì¤‘ë¦½ì€ ì˜ì‹¬ìŠ¤ëŸ½ë‹¤.",
    "ë…¸ë°”ëŠ” ë™ì¼ ë°œì–¸ì„ 2ì¼ ì—°ì† ë°˜ë³µí–ˆë‹¤. ê¸°ì–µ ì¡°ì‘ ê°€ëŠ¥ì„±ì´ ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ì°¨íŠ¸ì— ì—†ëŠ” ì¥ì†Œì—ì„œ ì‘ì „ì„ í¼ì³¤ë‹¤ê³  ì£¼ì¥í–ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ì €ê·¸ì™€ ê´€ë ¨ëœ ê¿ˆì„ ê¾¸ì—ˆë‹¤ê³  í„¸ì–´ë†“ì•˜ë‹¤.",
    "ë“€í¬ëŠ” ì ˆì°¨ë¥¼ ë”°ë¥´ì§€ ì•Šê³  ë¬´ë‹¨ íˆ¬í‘œë¥¼ ì§€ì‹œí–ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ìì‹ ì„ ê°ì—¼ìë¡œ ì§€ëª©í•œ ìë¥¼ ì „ë¶€ 'ë°˜ì—­ì'ë¡œ ì„ ì–¸í–ˆë‹¤.",
    "í†°ì€ ëˆ„êµ°ê°€ë¥¼ ëª°ë˜ ê°ì‹œí•œ ì‚¬ì‹¤ì„ ì¸ì •í–ˆë‹¤. ì´ìœ ëŠ” ë§í•˜ì§€ ì•Šì•˜ë‹¤.",
    "ë“€ë€ì€ ê°ì—¼ ìƒíƒœì—ì„œë„ ì •ìƒì´ì—ˆì„ ìˆ˜ ìˆë‹¤ëŠ” ê°€ì„¤ì„ ì£¼ì¥í–ˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” 'ì´ì œ ë¯¿ì„ ì‚¬ëŒì€ ì—†ë‹¤'ê³  ë§í•˜ë©° ë…ë¦½ í–‰ë™ì„ ì‹œì‘í–ˆë‹¤.",
    "ë…¸ë°”ëŠ” ì§„ë‹¨ì„œ ìœ„ì¡° ê°€ëŠ¥ì„±ì´ ìˆë‹¤ëŠ” ìµëª… ì œë³´ê°€ ë“¤ì–´ì™”ë‹¤.",
    "ë“€í¬ëŠ” ì¶”ë°©ëœ ê°ì—¼ìê°€ 'ìœ„ëŒ€í•œ ë³‘ê¸°'ì˜€ë‹¤ê³  ì¹­í–ˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ê³ ë¦½ëœ ë°©ì—ì„œ 3ì‹œê°„ ë™ì•ˆ í™€ë¡œ ìˆì—ˆë‹¤.",
    "ì¼€ë¦¬ê±´ì€ ê²©ë‚©ê³ ë¥¼ ë´‰ì‡„í–ˆë‹¤. ì´ìœ ëŠ” 'ì˜ˆì§€ëª½ ë•Œë¬¸'ì´ë¼ê³  í–ˆë‹¤.",
    "ë“€ë€ì€ 'í˜¼ë€ì´ ê³§ ì§ˆì„œ'ë¼ëŠ” ë§ì„ ìì£¼ ë°˜ë³µí•˜ê³  ìˆë‹¤.",
    "í†°ì€ 'ì§ê°'ì´ë¼ëŠ” ë§ì„ ê·¼ê±° ì—†ì´ ë°˜ë³µí•˜ë©° íŠ¹ì • ì¸ë¬¼ì„ ëª°ì•„ê°„ë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” ì •ê¸° ë¸Œë¦¬í•‘ì„ ëª¨ë‘ ìƒëµí•˜ê³  ê°œì¸ ì¡°ì‚¬ì— ì§‘ì¤‘í•˜ê³  ìˆë‹¤.",
    "ë ˆì´ë„ˆëŠ” ì ë“  ì‚¬ì´ ê¿ˆì—ì„œ ê°ì—¼ìì™€ ëŒ€í™”ë¥¼ ë‚˜ëˆ´ë‹¤ê³  ë§í–ˆë‹¤.",
    "ë…¸ë°”ëŠ” í†µì‹  ì¥ë¹„ë¥¼ ìì‹ ì˜ ê²ƒìœ¼ë¡œë§Œ ì•”í˜¸í™”í•´ ì‚¬ìš©í•˜ê³  ìˆë‹¤.",
    "ìŠ¤íˆ¬ì½”í”„ëŠ” ì–´ëŠ ìˆœê°„ë¶€í„° ì£¼ë³€ì˜ ì§ˆë¬¸ì— ëŒ€ë‹µí•˜ì§€ ì•ŠëŠ”ë‹¤.",
    "ë“€í¬ëŠ” 'í•œ ëª…ì¯¤ í¬ìƒë˜ì–´ì•¼ ì§„ì‹¤ì´ ë“œëŸ¬ë‚œë‹¤'ê³  ë§í–ˆë‹¤.",
    "ë“€ë€ì€ íˆ¬í‘œ ë•Œë§ˆë‹¤ í•­ìƒ íŠ¹ì • ì¸ë¬¼ì—ê²Œ í‘œë¥¼ ë˜ì§„ë‹¤. ì´ìœ ëŠ” ëª¨ë¥¸ë‹¤.",
    "ì¼€ë¦¬ê±´ì€ íŠ¹ì • êµ¬ì—­ì˜ ì ‘ê·¼ì„ ê°•í•˜ê²Œ ë§‰ê³  ìˆë‹¤. ì´ìœ ë¥¼ ë¬»ì ì¹¨ë¬µí–ˆë‹¤.",
    "í†°ì€ ê°‘ìê¸° ë‹¤ë¥¸ ì‚¬ëŒì„ ì˜ì‹¬í•˜ì§€ ì•Šê³  ìì±…í•˜ëŠ” íƒœë„ë¡œ ë³€í–ˆë‹¤.",
    "ë§¹í¬ìŠ¤ëŠ” 'ì´ ëª¨ë“  í˜¼ë€ì€ ì˜¤íˆë ¤ ê¸°íšŒë‹¤'ë¼ê³  ë§í•˜ë©° ì›ƒì—ˆë‹¤."
]

role_descriptions = {
    'í…Œë€': 'ë‹¹ì‹ ì€ í…Œë€ì…ë‹ˆë‹¤. ê°ì—¼ëœ í…Œë€ì„ ì°¾ì•„ë‚´ì•¼ í•©ë‹ˆë‹¤.',
    'ê°ì—¼ëœ í…Œë€': 'ë‹¹ì‹ ì€ ê°ì—¼ëœ í…Œë€ì…ë‹ˆë‹¤. ê°ì—¼ë˜ì§€ ì•Šì€ì²™ í•˜ì—¬ ëê¹Œì§€ ì‚´ì•„ë‚¨ìœ¼ì„¸ìš”.',
    'ì‚¬ë§': 'ë‹¹ì‹ ì€ ì‚¬ë§í–ˆì§€ë§Œ ìœ ë ¹ìœ¼ë¡œ ë‹¨ì„œë¥¼ ë‚¨ê¸¸ ìˆ˜ ìˆìŠµë‹ˆë‹¤.'
}

imposter_lies = [
    "{room}ì—ì„œ {target}ì™€ ê°™ì´ ìˆì—ˆê³  ì´ìƒí•œ ì ì€ ì—†ì—ˆì–´ìš”.",
    "{target}ëŠ” {room}ì— ìˆì—ˆì–´ìš”. ê¸‰í•˜ê²Œ ë‚˜ê°€ë˜ë°ìš”?",
    "ì„ ì› í¸ì˜ ì‹œì„¤ì—ì„œ {target}ì˜ ì›€ì§ì„ì´ ìˆ˜ìƒí–ˆì–´ìš”.",
    "ì •ë¹„ ì¤‘ì— {target}ê°€ {room} ìª½ì—ì„œ ë‚˜ì™”ì–´ìš”. ì•„ë¬´ ë§ë„ ì•ˆ í–ˆì–´ìš”."
]
crew_truths = [
    "{target}ê°€ {room} ê·¼ì²˜ì— ìˆì—ˆì–´ìš”. ì•„ë¬´ë„ ì—†ëŠ”ë° í˜¼ìì˜€ì–´ìš”.",
    "{room}ì—ì„œ ì´ìƒí•œ ì†Œë¦¬ê°€ ë‚¬ê³  {target}ê°€ ìˆì—ˆì–´ìš”.",
    "ì €ëŠ” {room}ì— ìˆì—ˆëŠ”ë° {target}ê°€ ê°‘ìê¸° ì‚¬ë¼ì¡Œì–´ìš”.",
    "{target}ê°€ ì„ ì› í¸ì˜ ì‹œì„¤ ìª½ì—ì„œ ëª°ë˜ ë‚˜ê°€ëŠ” ê±¸ ë´¤ì–´ìš”."
]

memory_log = defaultdict(list)
suspicion_score = defaultdict(int)
elimination_history = []
personal_messages = {}
emotion_state = defaultdict(lambda: "ê¸°ë³¸")


def run_intro():
    story = random.choice(story_prompts)
    print("\nğŸš€ Good day, Commander. ë°°í‹€í¬ë£¨ì €ì— ì˜¤ì‹  ê²ƒì„ í™˜ì˜í•©ë‹ˆë‹¤!")
    print("ğŸ§  ê°ì—¼ëœ í…Œë€ì´ ìš°ë¦¬ ìŠ¹ë¬´ì› ì‚¬ì´ì— ìˆ¨ì–´ ìˆìŠµë‹ˆë‹¤.")
    print("ğŸ¦  ì €ê·¸ì˜ í€¸ê³¼ ë””ë°”ìš°ëŸ¬ê°€ ì¹¨íˆ¬í•˜ì—¬ ì„ ì› ì¤‘ í•œ ëª…ì„ ê°ì—¼ì‹œì¼°ìŠµë‹ˆë‹¤.")
    print("ğŸ“– ìŠ¤í† ë¦¬: " + story)
    print("ğŸ¯ íˆ¬í‘œë¥¼ í†µí•´ ë§¤ì¼ í•œ ëª…ì”© ìš°ì£¼ ë°–ìœ¼ë¡œ ì¶”ë°©í•˜ì‹­ì‹œì˜¤.")
    input("â–¶ï¸ ì—”í„°ë¥¼ ëˆŒëŸ¬ DAY 1ì„ ì‹œì‘í•˜ì„¸ìš”...")


def generate_roles():
    roles = {p: 'í…Œë€' for p in players}
    imposter = random.choice(players)
    roles[imposter] = 'ê°ì—¼ëœ í…Œë€'
    return roles, imposter


def run_day1_intro(roles):
    print("\nâ˜€ï¸ DAY 1: í…Œë€ ìê¸°ì†Œê°œ ì‹œê°„ì…ë‹ˆë‹¤.")
    for pid in players:
        prompt = f"{pid}ë¼ëŠ” ì´ë¦„ì˜ í…Œë€ìœ¼ë¡œ, ì €ê·¸ë¡œ ê°ì—¼ë˜ì§€ ì•Šì•˜ë‹¤ê³  ì¦ëª…í•˜ê¸° ìœ„í•´, ì´ì™€ ê´€ë ¨í•˜ì—¬ ì‹ ë¢°ë¥¼ ì–»ê¸° ìœ„í•œ ê°„ë‹¨í•œ ìê¸°ì†Œê°œë¥¼ í•œì¤„ë¡œ í•˜ì„¸ìš”."
        response = ollama.chat(model='EEVE-Korean-10.8B', messages=[{"role": "user", "content": prompt}], stream=True)
        print(f"ğŸ¤– [{pid}]: ", end='', flush=True)
        for chunk in response:
            print(chunk.get("message", {}).get("content", ''), end='', flush=True)
        print()
    input("\nâ–¶ï¸ ì—”í„°ë¥¼ ëˆŒëŸ¬ DAY 2ë¥¼ ì‹œì‘í•˜ì„¸ìš”...")


def generate_clues(roles):
    clues = {}
    for p in players:
        clues[p] = {'ê¸°ì–µ': []}
        target = random.choice([x for x in players if x != p])
        room = random.choice(rooms)
        if roles[p] == 'ê°ì—¼ëœ í…Œë€':
            line = random.choice(imposter_lies).format(target=target, room=room)
            line += f" (ì„¤ë“ë ¥: {random.randint(7, 10)}/10)"
        else:
            line = random.choice(crew_truths).format(target=target, room=room)
            line += f" (ì˜ë¬´ì‹¤ ì§„ë‹¨: {'ì •ìƒ' if random.random() > 0.2 else 'ì´ìƒ ê°ì§€'})"
        clues[p]['ê¸°ì–µ'].append(line)
    return clues


def run_talk_round(alive, roles, clues):
    print("\nğŸ§  ì‚¬ë ¹ê´€, í…Œë€ë“¤ì˜ ì§„ìˆ ì„ ë“¤ì–´ë³´ì‹­ì‹œì˜¤.")
    statements = {}

    persona_prompts = {
        "ì•„í¬íŠœëŸ¬ìŠ¤ ë©©ìŠ¤í¬": "ë‹¹ì‹ ì€ ì•¼ë§ ìˆëŠ” ë…ì¬ìì…ë‹ˆë‹¤. ê³ ìƒí•œ ë§íˆ¬ë¡œ ëŒ€ì¤‘ì„ ì„ ë™í•˜ê³ , ê¶Œìœ„ì ìœ¼ë¡œ ë§í•˜ì„¸ìš”.",
        "ì§ ë ˆì´ë„ˆ": "ë‹¹ì‹ ì€ ììœ ì™€ ì •ì˜ë¥¼ ì¤‘ì‹œí•˜ëŠ” ì „ì§ ë³´ì•ˆê´€ì…ë‹ˆë‹¤. ëƒ‰ì†Œì  ìœ ë¨¸ë¥¼ ì„ë˜ ì¸ê°„ì ì¸ ë”°ëœ»í•¨ì„ ìœ ì§€í•˜ì„¸ìš”.",
        "ì‚¬ë¼ ì¼€ë¦¬ê±´": "ë‹¹ì‹ ì€ ê³ í†µì„ ê²ªì€ ìœ ë ¹ ìš”ì›ì…ë‹ˆë‹¤. ì¹¨ì°©í•˜ê³  ë‹¨í˜¸í•˜ë©° ê°ì •ì„ ì–µëˆ„ë¥´ëŠ” ë§íˆ¬ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”.",
        "ì‚¬ë¯¸ë¥´ ë“€ë€": "ë‹¹ì‹ ì€ ì¹¨ì°©í•˜ê³  ì´ì¤‘ì ì¸ ì „ëµê°€ì…ë‹ˆë‹¤. êµë¬˜í•œ ë§ë¡œ ìƒëŒ€ì˜ ì˜ì‹¬ì„ ìœ ë„í•˜ì„¸ìš”.",
        "ì—ë“œë¨¼ë“œ ë“€í¬": "ë‹¹ì‹ ì€ ì›ì¹™ì£¼ì˜ ì¥êµ°ì…ë‹ˆë‹¤. ëƒ‰ì •í•˜ê³  ë¶„ì„ì ì¸ ë§íˆ¬ë¡œ ë°œì–¸í•˜ì„¸ìš”.",
        "í†° ì¹´ì”ìŠ¤í‚¤": "ë‹¹ì‹ ì€ ì§ì„¤ì ì´ê³  í„°í”„í•œ ì‹¤ì „í˜•ì…ë‹ˆë‹¤. íˆ¬ë°•í•˜ê³  ì†”ì§í•˜ê²Œ ë§í•˜ì„¸ìš”.",
        "ë…¸ë°” í…Œë¼": "ë‹¹ì‹ ì€ ëƒ‰ì •í•œ ìœ ë ¹ ìš”ì›ì…ë‹ˆë‹¤. ê°ì •ì„ ë°°ì œí•œ ê°„ê²°í•˜ê³  ì •í™•í•œ ë¬¸ì¥ì„ ì‚¬ìš©í•˜ì„¸ìš”.",
        "ì•Œë ‰ì„¸ì´ ìŠ¤íˆ¬ì½”í”„": "ë‹¹ì‹ ì€ ëª…ì˜ˆë¥¼ ì¤‘ì‹œí•˜ëŠ” í•´êµ° ì „ëµê°€ì…ë‹ˆë‹¤. ê³ í’ìŠ¤ëŸ½ê³  í’ˆìœ„ ìˆê²Œ ë§í•˜ì„¸ìš”."
    }

    emotion_tone = {
        "ê¸°ë³¸": "",
        "ë¶ˆì•ˆ": "ë‹¹ì‹ ì€ ìµœê·¼ ì˜ì‹¬ì„ ë°›ì•„ ë¶ˆì•ˆí•œ ìƒíƒœì…ë‹ˆë‹¤.",
        "ìŠ¬í””": "ë‹¹ì‹ ì€ ë™ë£Œì˜ ì¶”ë°©ìœ¼ë¡œ ìŠ¬í””ì— ì ê²¨ ìˆìŠµë‹ˆë‹¤.",
        "ë¶„ë…¸": "ë‹¹ì‹ ì€ ëˆ„êµ°ê°€ì—ê²Œ ê°•í•œ ë¶„ë…¸ë¥¼ ëŠë¼ê³  ìˆìŠµë‹ˆë‹¤.",
        "ì²´ë…": "ë‹¹ì‹ ì€ ì²´ë…í•œ ìƒíƒœë¡œ ë¬´ê¸°ë ¥í•˜ê²Œ ë§í•©ë‹ˆë‹¤."
    }

    def update_emotion_state(pid):
        if suspicion_score[pid] >= 2:
            return "ë¶ˆì•ˆ"
        if elimination_history:
            last = elimination_history[-1]
            if last[0] != pid:
                return "ìŠ¬í””" if last[1] != "ê°ì—¼ëœ í…Œë€" else "ë¶„ë…¸"
        return "ê¸°ë³¸"

    for pid in alive:
        memory = '\n'.join(f"- {m}" for m in clues[pid]['ê¸°ì–µ'])
        if memory in memory_log[pid]:
            suspicion_score[pid] += 1
        memory_log[pid].append(memory)

        emotion_state[pid] = update_emotion_state(pid)
        emotion_line = emotion_tone.get(emotion_state[pid], "")
        persona = persona_prompts.get(pid, "ë‹¹ì‹ ì€ í…Œë€ ë³‘ì‚¬ì…ë‹ˆë‹¤.")

        prompt = f"""
ì €ëŠ” {pid}ì…ë‹ˆë‹¤. {persona}
{emotion_line}

í˜„ì¬ ìƒí™©ì—ì„œ ì €ëŠ” ê°ì—¼ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.
ë‹¨ì„œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:
{memory}
í•œ ë¬¸ì¥ìœ¼ë¡œ ì£¼ì¥ ë˜ëŠ” íƒ€ì¸ì„ ì˜ì‹¬í•˜ì„¸ìš”.
í˜•ì‹: ë°œì–¸ + (ë¹„ë°€ ë©”ì‹œì§€: ë‚´ìš©)
"""

        print(f"ğŸ¤– [{pid}]: ", end='', flush=True)
        response = ollama.chat(model='EEVE-Korean-10.8B', messages=[{"role": "user", "content": prompt}], stream=True)
        msg = ''
        for chunk in response:
            content = chunk.get("message", {}).get("content", '')
            print(content, end='', flush=True)
            msg += content
        print()

        if '(ë¹„ë°€ ë©”ì‹œì§€:' in msg:
            try:
                secret = msg.split('(ë¹„ë°€ ë©”ì‹œì§€:')[1].split(')')[0].strip()
                personal_messages[pid] = secret
            except:
                pass
        statements[pid] = msg

    print("\nğŸ“© ê°œì¸ ë©”ì‹œì§€ ë„ì°©:")
    for pid, msg in personal_messages.items():
        if pid in alive:
            print(f"- {pid}: '{msg}'")
    return statements


def resolve_tie_vote(candidates):
    print(f"\nğŸ¤” ë™í‘œì…ë‹ˆë‹¤. í›„ë³´: {', '.join(candidates)}")
    user_final = input(f"ìµœì¢… ë°°ì¶œ ëŒ€ìƒì ì„ íƒ ({'/'.join(candidates)}): ").strip()
    while user_final not in candidates:
        user_final = input("â— ì˜¬ë°”ë¥¸ ì´ë¦„ì„ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”: ").strip()
    return user_final


def run_vote_phase(alive, roles):
    vote = input("\nğŸ—³ï¸ ëˆ„êµ¬ë¥¼ ìš°ì£¼ ë°–ìœ¼ë¡œ ì¶”ë°©í•˜ì‹œê² ìŠµë‹ˆê¹Œ? (í…Œë€ ì´ë¦„ ì…ë ¥): ").strip()
    while vote not in alive:
        vote = input("â— ì˜¬ë°”ë¥¸ í…Œë€ ì´ë¦„ì„ ë‹¤ì‹œ ì…ë ¥í•˜ì„¸ìš”: ").strip()
    votes = [random.choice([p for p in alive if p != vote]) for _ in range(len(alive)-2)] + [vote]
    count = Counter(votes)
    sorted_votes = count.most_common()

    print("\nğŸ“Š íˆ¬í‘œ ê²°ê³¼:")
    for pid, v in sorted_votes:
        print(f"{pid}: {'â– '*v} ({v}í‘œ)")

    top_votes = sorted_votes[0][1]
    top_candidates = [pid for pid, v in sorted_votes if v == top_votes]
    eliminated = resolve_tie_vote(top_candidates) if len(top_candidates) > 1 else sorted_votes[0][0]

    role = roles[eliminated]
    elimination_history.append((eliminated, role))
    print(f"\nğŸ’¥ {eliminated}ëŠ” ìš°ì£¼ ë°–ìœ¼ë¡œ ì¶”ë°©ë˜ì—ˆìŠµë‹ˆë‹¤. (ì •ì²´: {'ê°ì—¼ëœ í…Œë€' if role == 'ê°ì—¼ëœ í…Œë€' else 'ì„ ëŸ‰í•œ í…Œë€'})")
    return eliminated


def check_win(alive, roles):
    remaining = [p for p in alive if roles[p] != 'ì‚¬ë§']
    imposters = [p for p in remaining if roles[p] == 'ê°ì—¼ëœ í…Œë€']
    if not imposters:
        return 'âœ… í…Œë€ ìŠ¹ë¦¬!'
    if len(remaining) <= 2:
        return 'ğŸ’€ ì €ê·¸ ìŠ¹ë¦¬!'
    return None


def show_final_report(roles):
    print("\nğŸ“Š ìµœì¢… ë¶„ì„ ë¦¬í¬íŠ¸\n----------------------")
    for name, score in sorted(suspicion_score.items(), key=lambda x: -x[1]):
        print(f"{name}: ì˜ì‹¬ ìˆ˜ì¹˜ {score}")
    correct_guesses = [e for e in elimination_history if e[1] == 'ê°ì—¼ëœ í…Œë€']
    print(f"\nğŸ§© ì¶”ë¦¬ ì •í™•ë„ í‰ê°€:")
    print(f"ì •í™•íˆ ì¶”ë°©í•œ ê°ì—¼ëœ í…Œë€ ìˆ˜: {len(correct_guesses)}")
    print(f"ì´ ì¶”ë°© ìˆ˜: {len(elimination_history)}")
    acc = len(correct_guesses) / len(elimination_history) * 100 if elimination_history else 0
    print(f"ì¶”ë¦¬ ì •í™•ë„: {acc:.1f}%")


def run_game():
    run_intro()
    roles, imposter = generate_roles()
    run_day1_intro(roles)
    alive = players.copy()
    day = 2
    while True:
        print(f"\nâ˜€ï¸ DAY {day}:")
        print(f"ë‚¨ì€ ì¸ì›: {len(alive)}ëª… | ê°ì—¼ëœ í…Œë€ ìƒì¡´ ì—¬ë¶€: {'ìƒì¡´' if any(roles[p]=='ê°ì—¼ëœ í…Œë€' for p in alive) else 'ì „ë©¸'}")
        clues = generate_clues(roles)
        run_talk_round(alive, roles, clues)
        eliminated = run_vote_phase(alive, roles)
        alive.remove(eliminated)
        roles[eliminated] = 'ì‚¬ë§'
        result = check_win(alive, roles)
        if result:
            print(f"\nğŸ ê²Œì„ ì¢…ë£Œ: {result}")
            show_final_report(roles)
            break
        day += 1


if __name__ == '__main__':
    run_game()